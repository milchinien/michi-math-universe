<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formel-Fury-Shooter</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/shop.css">
    <link rel="stylesheet" href="styles/class-selection.css">
    <link rel="stylesheet" href="styles/math-topics.css">
    <link rel="stylesheet" href="styles/difficulty-selection.css">
    <link rel="stylesheet" href="styles/tutorial.css">
    <link rel="stylesheet" href="styles/akademie.css">
    <link rel="stylesheet" href="styles/boss.css">
</head>
<body>
    <!-- Class Selection Menu (shown first) -->
    <div id="classSelectionMenu" class="class-selection-container">
        <div class="class-selection-header">
            <h1 class="main-title">ğŸ“š MICHIS MATHEMATIK AKADEMIE</h1>
            <p class="subtitle">WÃ¤hle deine Klassenstufe</p>
        </div>
        
        <div class="class-grid">
            <div class="class-card" data-class="7">
                <div class="class-number">7</div>
                <div class="class-title">Klasse 7</div>
                <div class="class-description">Algebraische Grundlagen</div>
                <div class="class-topics">
                    <span class="topic">Termumformungen</span>
                    <span class="topic">Lineare Gleichungen</span>
                    <span class="topic">Prozent- & Zinsrechnung</span>
                </div>
            </div>
            
            <div class="class-card" data-class="8">
                <div class="class-number">8</div>
                <div class="class-title">Klasse 8</div>
                <div class="class-description">Funktionen & Potenzen</div>
                <div class="class-topics">
                    <span class="topic">Lineare Funktionen</span>
                    <span class="topic">Potenzen & Wurzeln</span>
                    <span class="topic">Gleichungssysteme</span>
                </div>
            </div>
            
            <div class="class-card active" data-class="9">
                <div class="class-number">9</div>
                <div class="class-title">Klasse 9</div>
                <div class="class-description">Binomische Formeln & Parabeln</div>
                <div class="class-topics">
                    <span class="topic">Binomische Formeln</span>
                    <span class="topic">Quadratische Funktionen</span>
                    <span class="topic">Parabeln & Scheitelpunkt</span>
                </div>
                <div class="available-badge">VERFÃœGBAR</div>
            </div>
            
            <div class="class-card disabled" data-class="10">
                <div class="class-number">10</div>
                <div class="class-title">Klasse 10</div>
                <div class="class-description">Exponential- & Trigonometrie</div>
                <div class="class-topics">
                    <span class="topic">Exponentialfunktionen</span>
                    <span class="topic">Logarithmusfunktionen</span>
                    <span class="topic">Trigonometrische Funktionen</span>
                </div>
                <div class="coming-soon-badge">BALD VERFÃœGBAR</div>
            </div>
            
            <div class="class-card disabled" data-class="11">
                <div class="class-number">11</div>
                <div class="class-title">Klasse 11</div>
                <div class="class-description">Analysis & Vektorrechnung</div>
                <div class="class-topics">
                    <span class="topic">Differentialrechnung</span>
                    <span class="topic">Vektoren im Raum</span>
                    <span class="topic">Geraden & Ebenen</span>
                </div>
                <div class="coming-soon-badge">BALD VERFÃœGBAR</div>
            </div>
            
            <div class="class-card disabled" data-class="12">
                <div class="class-number">12</div>
                <div class="class-title">Klasse 12</div>
                <div class="class-description">Integralrechnung & Stochastik</div>
                <div class="class-topics">
                    <span class="topic">Integralrechnung</span>
                    <span class="topic">Wahrscheinlichkeitsrechnung</span>
                    <span class="topic">Hypothesentests</span>
                </div>
                <div class="coming-soon-badge">BALD VERFÃœGBAR</div>
            </div>
        </div>
        
        <div class="class-selection-footer">
            <button id="startGameBtn" class="start-game-btn" disabled>
                ğŸ® SPIEL STARTEN
            </button>
            <p class="footer-text">WÃ¤hle eine verfÃ¼gbare Klasse zum Spielen</p>
        </div>
    </div>

    <canvas id="gameCanvas" style="display: none;"></canvas>

    <!-- Boss UI Elements -->
    <div id="bossUI" class="boss-interface" style="display: none;">
        <div class="boss-health-container">
            <div class="boss-info">
                <h3 id="bossName" class="boss-name">Boss Name</h3>
                <span id="bossLevel" class="boss-level">Level 1</span>
            </div>
            <div class="boss-health-bar">
                <div id="bossHealthFill" class="boss-health-fill"></div>
                <div id="bossHealthText" class="boss-health-text">100%</div>
            </div>
            <div id="bossProgress" class="boss-progress">0/5 Formeln gelÃ¶st</div>
            <div id="bossStateIndicator" class="boss-stage-indicator">Spawning...</div>
        </div>
    </div>
    
    <!-- Boss Warning Overlay -->
    <div id="bossWarning" class="boss-warning" style="display: none;">
        âš ï¸ BOSS ANGRIFF INCOMING! âš ï¸
    </div>

    <!-- Boss Health Bar -->
    <div id="bossHealthBar" class="boss-health-container" style="display: none;">
        <div class="boss-name" id="bossName">BOSS NAME</div>
        <div class="boss-health-bar">
            <div class="boss-health-fill" id="bossHealthFill"></div>
            <div class="boss-health-text" id="bossHealthText">300/300</div>
        </div>
        <div class="boss-stage-indicator" id="bossStageIndicator">Stage 1/3</div>
    </div>

    <!-- Player Stats Panel -->
    <div id="playerStatsPanel">
        <div class="stats-header">
            <span class="stats-title">ğŸ“Š SPIELER STATS</span>
        </div>
        <div class="stats-content">
            <div class="stat-row">
                <span class="stat-icon">â¤ï¸</span>
                <span class="stat-label">HP:</span>
                <span class="stat-value" id="statHP">3/3</span>
            </div>
            <div class="stat-row">
                <span class="stat-icon">ğŸ’š</span>
                <span class="stat-label">HP-Reg:</span>
                <span class="stat-value" id="statHPRegen">0.0/s</span>
            </div>
            <div class="stat-row">
                <span class="stat-icon">ğŸ€</span>
                <span class="stat-label">GlÃ¼ck:</span>
                <span class="stat-value" id="statLuck">0%</span>
            </div>
            <div class="stat-row">
                <span class="stat-icon">âš¡</span>
                <span class="stat-label">Speed:</span>
                <span class="stat-value" id="statSpeed">100%</span>
            </div>
            <div class="stat-row">
                <span class="stat-icon">ğŸ¯</span>
                <span class="stat-label">Combo:</span>
                <span class="stat-value" id="statCombo">0x</span>
            </div>
            <div class="stat-row">
                <span class="stat-icon">ğŸ’°</span>
                <span class="stat-label">Coins:</span>
                <span class="stat-value" id="statCoins">0</span>
            </div>
            <div class="stat-row">
                <span class="stat-icon">ğŸŒŠ</span>
                <span class="stat-label">Wave:</span>
                <span class="stat-value" id="statWave">1</span>
            </div>
            <div class="stat-row">
                <span class="stat-icon">ğŸ“ˆ</span>
                <span class="stat-label">Level:</span>
                <span class="stat-value" id="statLevel">1</span>
            </div>
        </div>
    </div>

    <!-- Main Menu -->
    <div id="mainMenu">
        <div id="menuTitle">
            FORMEL-FURY<br>SHOOTER
        </div>
        <div id="menuSubtitle">
            Binomische Formeln treffen auf Alien-Action!
        </div>
        
        <div id="menuButtons">
            <button class="menu-btn primary-btn" onclick="showMathTopicsMenu()">
                ğŸ® SPIEL STARTEN
            </button>
            <button class="menu-btn secondary-btn" onclick="showAkademieMenu()">
                ğŸ“ AKADEMIE
            </button>
        </div>

        <div id="menuStats">
            <div class="menu-stat">
                <span>ğŸ† Rekord-Punktzahl:</span>
                <span id="menuHighScore">0</span>
            </div>
            <div class="menu-stat">
                <span>ğŸ¯ Beste Combo:</span>
                <span id="menuBestCombo">0</span>
            </div>
            <div class="menu-stat">
                <span>âœ… Richtige Antworten:</span>
                <span id="menuTotalCorrect">0</span>
            </div>
            <div class="menu-stat">
                <span>ğŸ² Spiele gespielt:</span>
                <span id="menuGamesPlayed">0</span>
            </div>
        </div>

        <div id="menuInfo">
            <div>Formel-Fury-Shooter v1.0</div>
            <div>Phase 4.2: Modulare Struktur</div>
            <div>Â© 2024 Michi Prompts</div>
        </div>
    </div>

    <!-- Math Topics Selection Menu -->
    <div id="mathTopicsMenu">
        <div id="mathTopicsTitle">
            âš”ï¸ WÃ„HLE DEINE GEGNER âš”ï¸
        </div>
        <div id="mathTopicsSubtitle">
            Bestimme, welche mathematischen Monster dich herausfordern sollen!
        </div>
        
        <div class="math-topics-container">
            <div class="topic-category">
                <h3 class="category-title">ğŸ”¥ Binomische Formeln - Die Klassiker</h3>
                <div class="topic-items">
                    <div class="topic-item">
                        <input type="checkbox" id="binomial-formulas" class="topic-checkbox" checked>
                        <label for="binomial-formulas" class="topic-label">
                            <span class="topic-name">ğŸ›ï¸ Binomische Formeln-Bestien</span>
                            <span class="topic-description">Die drei legendÃ¤ren Formeln: (a+b)Â², (a-b)Â², (a+b)(a-b)</span>
                        </label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" id="quadratic-equations" class="topic-checkbox">
                        <label for="quadratic-equations" class="topic-label">
                            <span class="topic-name">âš”ï¸ Quadratische Gleichungs-DÃ¤monen</span>
                            <span class="topic-description">Mitternachtsformel & p-q-Formel Krieger</span>
                        </label>
                    </div>
                </div>
            </div>
            
            <div class="topic-category">
                <h3 class="category-title">ğŸ“ˆ Quadratische Funktionen - Die Parabeln</h3>
                <div class="topic-items">
                    <div class="topic-item">
                        <input type="checkbox" id="quadratic-functions" class="topic-checkbox">
                        <label for="quadratic-functions" class="topic-label">
                            <span class="topic-name">ğŸŒ™ Parabel-Phantome</span>
                            <span class="topic-description">Scheitelpunkt, Nullstellen & Normalform-Monster</span>
                        </label>
                    </div>
                    <div class="topic-item">
                        <input type="checkbox" id="function-transformations" class="topic-checkbox">
                        <label for="function-transformations" class="topic-label">
                            <span class="topic-name">ğŸ”„ Funktions-Transformations-Titanen</span>
                            <span class="topic-description">Verschiebung, Streckung & Spiegelung der Parabeln</span>
                        </label>
                    </div>
                </div>
            </div>
            
            <div class="topic-category">
                <h3 class="category-title">ğŸ§® Wurzeln & Potenzen - Die Radikalen</h3>
                <div class="topic-items">
                    <div class="topic-item disabled">
                        <input type="checkbox" id="square-roots" class="topic-checkbox" disabled>
                        <label for="square-roots" class="topic-label">
                            <span class="topic-name">âˆš Wurzel-WÃ¤chter</span>
                            <span class="topic-description">Quadratwurzeln ziehen & Wurzelgesetze anwenden</span>
                            <span class="coming-soon">Bald verfÃ¼gbar</span>
                        </label>
                    </div>
                    <div class="topic-item disabled">
                        <input type="checkbox" id="power-laws" class="topic-checkbox" disabled>
                        <label for="power-laws" class="topic-label">
                            <span class="topic-name">ğŸ’¥ Potenzgesetze-Piraten</span>
                            <span class="topic-description">Negative & rationale Exponenten meistern</span>
                            <span class="coming-soon">Bald verfÃ¼gbar</span>
                        </label>
                    </div>
                </div>
            </div>
        </div>
        
        
        <div class="math-topics-info">
            <div class="selected-count">
                <span id="selectedTopicsCount">1</span> Gegnertyp(en) gewÃ¤hlt
            </div>
        </div>
        
        <div class="math-topics-buttons">
            <button class="menu-btn secondary" onclick="backToMainMenuFromMathTopics()">
                â†©ï¸ ZURÃœCK ZUR BASIS
            </button>
            <button class="menu-btn primary" onclick="proceedToDifficultySelection()" id="proceedBtn">
                âš”ï¸ WEITER!
            </button>
        </div>
    </div>

    <!-- Difficulty Selection Menu -->
    <div id="difficultySelectionMenu">
        <div id="difficultySelectionTitle">
            âš”ï¸ WÃ„HLE DEIN SCHWIERIGKEITSGRAD âš”ï¸
        </div>
        <div id="difficultySelectionSubtitle">
            Bestimme die IntensitÃ¤t deines mathematischen Kampfes!
        </div>
        
        <div class="difficulty-selection-grid">
            <div class="difficulty-selection-card easy selected" data-difficulty="easy">
                <div class="difficulty-selection-icon">âš”ï¸</div>
                <div class="difficulty-selection-name">Formel-Krieger</div>
                <div class="difficulty-selection-description">Entspannter Kampf fÃ¼r Einsteiger</div>
                <div class="difficulty-selection-features">
                    <div class="difficulty-feature">ğŸ¯ Weniger Gegner</div>
                    <div class="difficulty-feature">â° Mehr Zeit</div>
                    <div class="difficulty-feature">ğŸ’š Einfache Formeln</div>
                    <div class="difficulty-feature">ğŸ›¡ï¸ Mehr Lebenspunkte</div>
                </div>
            </div>
            
            <div class="difficulty-selection-card medium" data-difficulty="medium">
                <div class="difficulty-selection-icon">ğŸ”¥</div>
                <div class="difficulty-selection-name">Gleichungs-Veteran</div>
                <div class="difficulty-selection-description">Ausgewogene Herausforderung</div>
                <div class="difficulty-selection-features">
                    <div class="difficulty-feature">âš¡ Standard Tempo</div>
                    <div class="difficulty-feature">ğŸ² Gemischte Formeln</div>
                    <div class="difficulty-feature">ğŸ† Bessere Belohnungen</div>
                    <div class="difficulty-feature">âš–ï¸ Ausgewogenes Gameplay</div>
                </div>
            </div>
            
            <div class="difficulty-selection-card hard" data-difficulty="hard">
                <div class="difficulty-selection-icon">ğŸ’€</div>
                <div class="difficulty-selection-name">Mathe-DÃ¤mon</div>
                <div class="difficulty-selection-description">Brutaler Kampf fÃ¼r Experten</div>
                <div class="difficulty-selection-features">
                    <div class="difficulty-feature">ğŸ’¥ Mehr Gegner</div>
                    <div class="difficulty-feature">âš¡ Weniger Zeit</div>
                    <div class="difficulty-feature">ğŸ”¥ Komplexe Formeln</div>
                    <div class="difficulty-feature">ğŸ’ Maximale Belohnungen</div>
                </div>
            </div>
            
            <div class="difficulty-selection-card nightmare" data-difficulty="nightmare">
                <div class="difficulty-selection-icon">ğŸ‘¹</div>
                <div class="difficulty-selection-name">Formel-Alptraum</div>
                <div class="difficulty-selection-description">Nur fÃ¼r wahre Mathe-GÃ¶tter</div>
                <div class="difficulty-selection-features">
                    <div class="difficulty-feature">ğŸŒªï¸ Chaos-Modus</div>
                    <div class="difficulty-feature">âš¡ Extreme Geschwindigkeit</div>
                    <div class="difficulty-feature">ğŸ§  HÃ¶chste KomplexitÃ¤t</div>
                    <div class="difficulty-feature">ğŸ‘‘ LegendÃ¤re Belohnungen</div>
                </div>
            </div>
        </div>
        
        <div class="difficulty-selection-info">
            <div class="selected-difficulty-display">
                <span class="selected-difficulty-icon">âš”ï¸</span>
                <span class="selected-difficulty-name">Formel-Krieger</span>
                <span class="selected-difficulty-desc">Entspannter Kampf fÃ¼r Einsteiger</span>
            </div>
        </div>
        
        <div class="difficulty-selection-buttons">
            <button class="menu-btn secondary" onclick="backToMathTopicsFromDifficulty()">
                â†©ï¸ ZURÃœCK ZU GEGNERN
            </button>
            <button class="menu-btn primary" onclick="proceedToGameModeSelection()">
                âš”ï¸ IN DEN KAMPF!
            </button>
        </div>
    </div>

    <!-- Game Mode Selection Menu -->
    <div id="gameModeMenu">
        <div id="gameModeTitle">
            SPIELMODUS WÃ„HLEN
        </div>
        
        <div class="mode-selection">
            <div class="mode-card day-mode" onclick="startGameWithMode('day')">
                <div class="mode-icon">â˜€ï¸</div>
                <div class="mode-title">TAG-MODUS</div>
                <div class="mode-description">
                    Entspanntes Lernen mit Multiple-Choice
                </div>
                <ul class="mode-features">
                    <li>âœ… Multiple-Choice Antworten</li>
                    <li>âš¡ Schnellere KÃ¤mpfe</li>
                    <li>ğŸ¯ AnfÃ¤ngerfreundlich</li>
                    <li>ğŸŒŸ Perfekt zum Ãœben</li>
                </ul>
            </div>
            
            <div class="mode-card night-mode" onclick="startGameWithMode('night')">
                <div class="mode-icon">ğŸŒ™</div>
                <div class="mode-title">NACHT-MODUS</div>
                <div class="mode-description">
                    Herausforderung mit freier Eingabe
                </div>
                <ul class="mode-features">
                    <li>âœï¸ Freie Antwort-Eingabe</li>
                    <li>ğŸ§  VollstÃ¤ndiges VerstÃ¤ndnis</li>
                    <li>âš”ï¸ Maximale Herausforderung</li>
                    <li>ğŸ† HÃ¶here Belohnungen</li>
                </ul>
            </div>
        </div>
        
        <div style="display: flex; justify-content: center; width: 100%; margin-top: 40px;">
            <button class="menu-btn" onclick="backToMathTopicsMenu()">
                â†©ï¸ ZURÃœCK ZU SCHWIERIGKEIT
            </button>
        </div>
    </div>

    <!-- Settings Menu -->
    <div id="settingsMenu">
        <div id="settingsContent">
            <div id="settingsTitle">EINSTELLUNGEN</div>
            
            <div class="setting-item">
                <span class="setting-label">Schwierigkeit:</span>
                <span class="setting-value" id="difficultyValue">Normal</span>
            </div>
            
            <div class="setting-item">
                <span class="setting-label">Sound-Effekte:</span>
                <span class="setting-value" id="soundValue">Ein</span>
            </div>
            
            <div class="setting-item">
                <span class="setting-label">Partikel-Effekte:</span>
                <span class="setting-value" id="particlesValue">Ein</span>
            </div>
            
            <div class="setting-item">
                <span class="setting-label">Debug-Info:</span>
                <span class="setting-value" id="debugValue">Aus</span>
            </div>

            <button class="menu-btn" onclick="resetProgress()" style="margin-top: 20px;">
                ğŸ”„ FORTSCHRITT ZURÃœCKSETZEN
            </button>
            
            <button class="menu-btn" onclick="resetCurrency()" style="margin-top: 10px;">
                ğŸ’° WÃ„HRUNG ZURÃœCKSETZEN
            </button>
            
            <button class="menu-btn" onclick="closeSettings()" style="margin-top: 10px;">
                â†©ï¸ ZURÃœCK
            </button>
        </div>
    </div>
    
    <!-- Upgrades Menu -->
    <div id="upgradesMenu">
        <div id="upgradesContent">
            <button class="upgrades-back-btn" onclick="closeUpgrades()">â†©ï¸ ZURÃœCK ZUM MENÃœ</button>
            
            <div id="upgradesTitle">UPGRADES</div>
            
            <div class="upgrades-dev-info">
                <div class="dev-stat">
                    <span>VerfÃ¼gbare Upgrades:</span>
                    <span id="totalUpgrades">0</span>
                </div>
                <div class="dev-stat">
                    <span>Implementierte Upgrades:</span>
                    <span id="implementedUpgrades">0</span>
                </div>
                <div class="dev-stat">
                    <span>Nur visuell:</span>
                    <span id="visualOnlyUpgrades">0</span>
                </div>
            </div>
            
            <div class="upgrades-grid" id="upgradesGrid">
                <!-- Upgrade icons werden hier dynamisch eingefÃ¼gt -->
            </div>
        </div>
    </div>

    <!-- Upgrade Detail Modal -->
    <div id="upgradeDetailModal">
        <div id="upgradeDetailContent">
            <button class="upgrade-detail-close" onclick="closeUpgradeDetail()">âœ–</button>
            
            <div class="upgrade-detail-icon" id="upgradeDetailIcon">ğŸ“š</div>
            <div id="upgradeDetailTitle">UPGRADE NAME</div>
            
            <div id="upgradeDetailRarities">
                <!-- Rarity sections werden hier dynamisch eingefÃ¼gt -->
            </div>
        </div>
    </div>

    <!-- Instructions Menu -->
    <div id="instructionsMenu">
        <div id="instructionsContent">
            <div id="instructionsTitle">SPIELANLEITUNG</div>
            
            <div class="instruction-section">
                <h3>ğŸ¯ Spielziel</h3>
                <p>Eliminiere Alien-Gegner durch das LÃ¶sen binomischer Formeln! Erreiche hohe Combos und sammle Punkte, um neue Formel-Typen freizuschalten.</p>
            </div>

            <div class="instruction-section">
                <h3>ğŸ® Steuerung</h3>
                <ul>
                    <li><strong>WASD</strong> - Bewegung</li>
                    <li><strong>Maus</strong> - Gegner anvisieren und anklicken</li>
                    <li><strong>SPACE</strong> - Formel-HUD Ã¶ffnen/schlieÃŸen</li>
                    <li><strong>ESC</strong> - Pause-MenÃ¼</li>
                    <li><strong>Enter</strong> - Antwort bestÃ¤tigen</li>
                </ul>
            </div>

            <div class="instruction-section">
                <h3>ğŸ§® Formel-Typen</h3>
                <ul>
                    <li><strong>1. Binomische:</strong> (a+b)Â² = aÂ² + 2ab + bÂ²</li>
                    <li><strong>2. Binomische:</strong> (a-b)Â² = aÂ² - 2ab + bÂ²</li>
                    <li><strong>3. Binomische:</strong> (a+b)(a-b) = aÂ² - bÂ²</li>
                    <li><strong>Faktorisierung:</strong> Umkehrung der Binomischen Formeln</li>
                </ul>
            </div>

            <div class="instruction-section">
                <h3>ğŸ‘¾ Gegner-Typen</h3>
                <div class="enemy-types">
                    <div class="enemy-type">
                        <div class="enemy-type-header">
                            <div class="enemy-icon pz"></div>
                            <strong>Polynom-Zombie (PZ)</strong>
                        </div>
                        <p>Langsam, 80 HP, einfache Formeln<br>Belohnung: 1.0x</p>
                    </div>
                    <div class="enemy-type">
                        <div class="enemy-type-header">
                            <div class="enemy-icon gg"></div>
                            <strong>Gleichungs-Geist (GG)</strong>
                        </div>
                        <p>Schnell, 60 HP, mittlere Formeln<br>Belohnung: 1.3x</p>
                    </div>
                    <div class="enemy-type">
                        <div class="enemy-type-header">
                            <div class="enemy-icon eb"></div>
                            <strong>Elite-Algebra-Bestie (EB)</strong>
                        </div>
                        <p>Langsam, 150 HP, schwere Formeln<br>Belohnung: 2.0x</p>
                    </div>
                    <div class="enemy-type">
                        <div class="enemy-type-header">
                            <div class="enemy-icon standard"></div>
                            <strong>Standard-Gegner</strong>
                        </div>
                        <p>Normal, 100 HP, gemischte Formeln<br>Belohnung: 1.0x</p>
                    </div>
                </div>
            </div>

            <div class="instruction-section">
                <h3>ğŸ”¥ Combo-System</h3>
                <p>Richtige Antworten in Folge erhÃ¶hen deine Combo! Hohe Combos bringen Bonus-Punkte und schalten schwierigere Gegner frei.</p>
            </div>

            <div class="instruction-section">
                <h3>ğŸ“ˆ Progression</h3>
                <p>Mit steigender Punktzahl und Combo-Level schaltest du neue Formel-Typen frei und triffst auf stÃ¤rkere Gegner. Bleib wachsam!</p>
            </div>
            
            <button class="menu-btn" onclick="closeInstructions()" style="margin-top: 20px;">
                â†©ï¸ ZURÃœCK ZUM MENÃœ
            </button>
        </div>
    </div>

    <!-- Cheat Mode Indicator -->
    <div id="cheatIndicator">
        ğŸ”§ CHEAT-MODUS AKTIV ğŸ”§
    </div>
   
   <!-- Game UI Overlay -->
   <div id="gameUI">
       <!-- Formula Challenge HUD -->
       <div id="formulaHUD">
           <div id="formulaDisplay">DrÃ¼cke SPACE fÃ¼r eine neue Formel...</div>
           <input type="text" id="formulaInput" placeholder="Gib die LÃ¶sung ein... (z.B. xÂ² + 4x + 4)" />
           <div id="formulaButtons">
               <button class="formula-btn" onclick="game.formulaSystem.submitAnswer()">Antworten</button>
               <button class="formula-btn" onclick="game.formulaSystem.skipFormula()">Ãœberspringen</button>
               <button class="formula-btn" onclick="game.formulaSystem.hideFormulaHUD()">SchlieÃŸen</button>
           </div>
       </div>
       
       <!-- Feedback Display -->
       <div id="feedbackDisplay"></div>
   </div>

   <!-- Multiple Choice HUD (Day Mode) -->
   <div id="multipleChoiceHUD">
       <div id="mcQuestion">Welche Antwort ist korrekt?</div>
       <div id="mcAnswers">
           <button class="mc-answer" onclick="selectMultipleChoice(0)">A) Option 1</button>
           <button class="mc-answer" onclick="selectMultipleChoice(1)">B) Option 2</button>
           <button class="mc-answer" onclick="selectMultipleChoice(2)">C) Option 3</button>
           <button class="mc-answer" onclick="selectMultipleChoice(3)">D) Option 4</button>
       </div>
       <div id="mcTimer">Zeit: <span id="mcTimeLeft">15</span>s</div>
   </div>

   <!-- Level Up Menu -->
   <div id="levelUpMenu">
       <div id="levelUpContent">
           <div id="levelUpCoins">
               ğŸ’° <span id="levelUpCoinsValue">0</span> Coins
           </div>
           
           <div id="levelUpTitle">LEVEL UP!</div>
           
           <div id="levelUpUpgrades">
               <div class="upgrade-card" onclick="selectUpgrade(0)">
                   <div class="upgrade-icon">
                       <div class="upgrade-icon-placeholder">?</div>
                   </div>
                   <div class="upgrade-name" id="upgrade0Name">Upgrade 1</div>
                   <div class="upgrade-description" id="upgrade0Desc">Platzhalter Beschreibung</div>
                   <div class="upgrade-category">Common</div>
               </div>
               
               <div class="upgrade-card" onclick="selectUpgrade(1)">
                   <div class="upgrade-icon">
                       <div class="upgrade-icon-placeholder">?</div>
                   </div>
                   <div class="upgrade-name" id="upgrade1Name">Upgrade 2</div>
                   <div class="upgrade-description" id="upgrade1Desc">Platzhalter Beschreibung</div>
                   <div class="upgrade-category">Rare</div>
               </div>
               
               <div class="upgrade-card" onclick="selectUpgrade(2)">
                   <div class="upgrade-icon">
                       <div class="upgrade-icon-placeholder">?</div>
                   </div>
                   <div class="upgrade-name" id="upgrade2Name">Upgrade 3</div>
                   <div class="upgrade-description" id="upgrade2Desc">Platzhalter Beschreibung</div>
                   <div class="upgrade-category">Legendary</div>
               </div>
           </div>
           
           <div id="levelUpPageInfo">1 von 3</div>
       </div>
   </div>

   <!-- Pause Menu -->
   <div id="pauseMenu">
       <div id="pauseContent">
           <div id="pauseTitle">SPIEL PAUSIERT</div>
           
           <button class="pause-btn" onclick="game.resumeGame()">
               â–¶ Spiel Fortsetzen
           </button>
           
           <button class="pause-btn" onclick="game.restartGame()">
               ğŸ”„ Neustart
           </button>
           
           <button class="pause-btn" onclick="game.showMainMenu()">
               ğŸ  ZurÃ¼ck ins HauptmenÃ¼
           </button>
           
           <div id="pauseStats">
               <div class="pause-stat">
                   <span>Aktuelle Punktzahl:</span>
                   <span id="pauseScore">0</span>
               </div>
               <div class="pause-stat">
                   <span>Richtige Antworten:</span>
                   <span id="pauseCorrect">0</span>
               </div>
               <div class="pause-stat">
                   <span>Falsche Antworten:</span>
                   <span id="pauseIncorrect">0</span>
               </div>
               <div class="pause-stat">
                   <span>Genauigkeit:</span>
                   <span id="pauseAccuracy">100%</span>
               </div>
               <div class="pause-stat">
                   <span>Aktuelle Gesundheit:</span>
                   <span id="pauseHealth">100/100</span>
               </div>
           </div>
           
           <div class="pause-warning">
               âš  Formeln und Antworten sind im Pause-MenÃ¼ verborgen âš <br>
               Dies verhindert unfaires Nachschlagen wÃ¤hrend des Spiels.
           </div>
       </div>
   </div>
   
   <!-- HUD Elements -->
   <div id="fpsCounter">FPS: 0</div>
   <div id="currencyDisplay">
       ğŸ’° <span id="coinValue">0</span> Coins
   </div>
   
   <!-- Wave Display -->
   <div id="waveDisplay">
       <div id="waveNumber">Welle 1</div>
       <div id="waveCountdown">NÃ¤chste Welle in: <span id="waveTimer">30</span>s</div>
   </div>
   <div id="scoreDisplay">
       <div>Score: <span id="scoreValue">0</span></div>
       <div>Richtig: <span id="correctCount">0</span></div>
       <div>Falsch: <span id="incorrectCount">0</span></div>
   </div>
   
   <div id="comboDisplay">
       <div>Combo: <span id="comboValue">0</span></div>
       <div>Max: <span id="comboMaxValue">0</span></div>
       <div>â± Zeit: <span id="comboTimer">10</span>s</div>
   </div>
   
   <div id="highScoreDisplay">
       <div>ğŸ† High Score: <span id="highScoreValue">0</span></div>
   </div>
   
   <div id="gameInfo">
       <div>Formel-Fury-Shooter v1.1</div>
       <div>Phase 4.2: Modulare Struktur</div>
       <div id="gameModeInfo">Modus: NACHT | Controls: WASD + Maus + ESC</div>
   </div>

   <!-- Key Bindings Display -->
   <div id="keyBindingsDisplay">
       <div class="keybindings-header">ğŸ® STEUERUNG</div>
       <div class="keybindings-content">
           <div class="keybinding-row">
               <span class="key-combo">WASD</span>
               <span class="key-action">Bewegung</span>
           </div>
           <div class="keybinding-row">
               <span class="key-combo">MAUS</span>
               <span class="key-action">Zielen & SchieÃŸen</span>
           </div>
           <div class="keybinding-row">
               <span class="key-combo">ESC</span>
               <span class="key-action">Pause</span>
           </div>
           <div class="keybinding-row" id="quantumJumpBinding" style="display: none;">
               <span class="key-combo">SPACE</span>
               <span class="key-action">Quantensprung</span>
           </div>
           <div class="keybinding-row">
               <span class="key-combo">ENTER</span>
               <span class="key-action">Antwort bestÃ¤tigen</span>
           </div>
           <div class="keybinding-row">
               <span class="key-combo">TAB</span>
               <span class="key-action">Formel Ã¼berspringen</span>
           </div>
       </div>
   </div>

   <!-- Shop Menu (Brotato-Style Layout) -->
   <div id="shopMenu">
       <div class="shop-container">
           <!-- Shop Items Bereich (links oben) -->
           <div class="shop-section">
               <div class="shop-header">
                   <h2 class="shop-title">ğŸ›’ SHOP</h2>
                   <p class="shop-subtitle">WÃ¤hle deine Items weise!</p>
               </div>
               <div class="shop-items-grid">
                   <div class="shop-item" id="shopItem0">
                       <div class="shop-item-icon">â“</div>
                       <div class="shop-item-name">Lade...</div>
                       <div class="shop-item-description">Items werden geladen...</div>
                       <div class="shop-item-rarity">-</div>
                       <div class="shop-item-price">ğŸ’° 0</div>
                   </div>
                   <div class="shop-item" id="shopItem1">
                       <div class="shop-item-icon">â“</div>
                       <div class="shop-item-name">Lade...</div>
                       <div class="shop-item-description">Items werden geladen...</div>
                       <div class="shop-item-rarity">-</div>
                       <div class="shop-item-price">ğŸ’° 0</div>
                   </div>
                   <div class="shop-item" id="shopItem2">
                       <div class="shop-item-icon">â“</div>
                       <div class="shop-item-name">Lade...</div>
                       <div class="shop-item-description">Items werden geladen...</div>
                       <div class="shop-item-rarity">-</div>
                       <div class="shop-item-price">ğŸ’° 0</div>
                   </div>
               </div>
           </div>

           <!-- Player Stats Bereich (rechts oben) -->
           <div class="stats-section">
               <div class="stats-header">
                   <h3 class="stats-title">ğŸ“Š STATS</h3>
               </div>
               <div class="stats-grid">
                   <div class="stat-row">
                       <span class="stat-icon">â¤ï¸</span>
                       <span class="stat-label">Gesundheit:</span>
                       <span class="stat-value" id="shopStatHP">100/100</span>
                   </div>
                   <div class="stat-row">
                       <span class="stat-icon">ğŸ›¡ï¸</span>
                       <span class="stat-label">Schild:</span>
                       <span class="stat-value" id="shopStatShield">0</span>
                   </div>
                   <div class="stat-row">
                       <span class="stat-icon">âš¡</span>
                       <span class="stat-label">Geschwindigkeit:</span>
                       <span class="stat-value" id="shopStatSpeed">100%</span>
                   </div>
                   <div class="stat-row">
                       <span class="stat-icon">ğŸ’°</span>
                       <span class="stat-label">MÃ¼nzen:</span>
                       <span class="stat-value" id="shopStatCoins">0</span>
                   </div>
               </div>
           </div>

           <!-- Inventar Bereich (links unten) -->
           <div class="inventory-section">
               <div class="inventory-header">
                   <h3 class="inventory-title">ğŸ’ INVENTAR</h3>
                   <p class="inventory-info">Gesammelte Items</p>
               </div>
               <div class="inventory-grid" id="inventoryGrid">
                   <!-- Inventory slots werden dynamisch generiert -->
               </div>
           </div>

           <!-- Continue Bereich (rechts unten) -->
           <div class="continue-section">
               <button class="continue-button" onclick="game.shopSystem?.continueToNextWave()">
                   <div class="continue-wave-info" id="shopWaveInfo">WELLE 1</div>
                   âš”ï¸ WEITER KÃ„MPFEN
               </button>
               <button class="menu-button" onclick="game.shopSystem?.returnToMainMenu()">
                   ğŸ  ZURÃœCK INS HAUPTMENÃœ
               </button>
           </div>
       </div>
       
       <!-- Shop Feedback -->
       <div id="shopFeedback" class="shop-feedback"></div>
   </div>

   <!-- Akademie Menu -->
   <div id="akademieMenu" style="display: none;">
       <div id="akademieTitle">
           ğŸ“ MATHEMATIK AKADEMIE
       </div>
       <div id="akademieSubtitle">
           WÃ¤hle deinen Lernbereich - Klicke auf ein Thema fÃ¼r Training oder Quiz!
       </div>
       
       <div class="akademie-topics-container">
           <div class="akademie-topic-category">
               <h3 class="akademie-category-title">ğŸ”¥ Binomische Formeln - Die Klassiker</h3>
               <div class="akademie-topic-items">
                   <div class="akademie-topic-item" data-topic="binomial-formulas">
                       <div class="akademie-topic-content">
                           <span class="akademie-topic-name">ğŸ›ï¸ Binomische Formeln-Bestien</span>
                           <span class="akademie-topic-description">Die drei legendÃ¤ren Formeln: (a+b)Â², (a-b)Â², (a+b)(a-b)</span>
                       </div>
                   </div>
                   <div class="akademie-topic-item" data-topic="quadratic-equations">
                       <div class="akademie-topic-content">
                           <span class="akademie-topic-name">âš”ï¸ Quadratische Gleichungs-DÃ¤monen</span>
                           <span class="akademie-topic-description">Mitternachtsformel & p-q-Formel Krieger</span>
                       </div>
                   </div>
               </div>
           </div>
           
           <div class="akademie-topic-category">
               <h3 class="akademie-category-title">ğŸ“ˆ Quadratische Funktionen - Die Parabeln</h3>
               <div class="akademie-topic-items">
                   <div class="akademie-topic-item disabled" data-topic="quadratic-functions">
                       <div class="akademie-topic-content">
                           <span class="akademie-topic-name">ğŸŒ™ Parabel-Phantome</span>
                           <span class="akademie-topic-description">Scheitelpunkt, Nullstellen & Normalform-Monster</span>
                           <span class="akademie-coming-soon">Bald verfÃ¼gbar</span>
                       </div>
                   </div>
                   <div class="akademie-topic-item disabled" data-topic="function-transformations">
                       <div class="akademie-topic-content">
                           <span class="akademie-topic-name">ğŸ”„ Funktions-Transformations-Titanen</span>
                           <span class="akademie-topic-description">Verschiebung, Streckung & Spiegelung der Parabeln</span>
                           <span class="akademie-coming-soon">Bald verfÃ¼gbar</span>
                       </div>
                   </div>
               </div>
           </div>
           
           <div class="akademie-topic-category">
               <h3 class="akademie-category-title">ğŸ§® Wurzeln & Potenzen - Die Radikalen</h3>
               <div class="akademie-topic-items">
                   <div class="akademie-topic-item disabled" data-topic="square-roots">
                       <div class="akademie-topic-content">
                           <span class="akademie-topic-name">âˆš Wurzel-WÃ¤chter</span>
                           <span class="akademie-topic-description">Quadratwurzeln ziehen & Wurzelgesetze anwenden</span>
                           <span class="akademie-coming-soon">Bald verfÃ¼gbar</span>
                       </div>
                   </div>
                   <div class="akademie-topic-item disabled" data-topic="power-laws">
                       <div class="akademie-topic-content">
                           <span class="akademie-topic-name">ğŸ’¥ Potenzgesetze-Piraten</span>
                           <span class="akademie-topic-description">Negative & rationale Exponenten meistern</span>
                           <span class="akademie-coming-soon">Bald verfÃ¼gbar</span>
                       </div>
                   </div>
               </div>
           </div>
       </div>
       
       <div class="akademie-buttons">
           <button class="menu-btn secondary" onclick="backToMainMenuFromAkademie()">
               â†©ï¸ ZURÃœCK ZUM HAUPTMENÃœ
           </button>
       </div>
   </div>

   <!-- Learning Mode Selection Modal -->
   <div id="learningModeModal" class="modal-overlay" style="display: none;">
       <div class="modal-content">
           <div class="modal-header">
               <h3 id="modalTopicTitle">ğŸ“š Lernmodus wÃ¤hlen</h3>
               <button class="modal-close" onclick="closeLearningModeModal()">âœ–</button>
           </div>
           <div class="modal-body">
               <p>Wie mÃ¶chtest du <span id="modalTopicName">dieses Thema</span> lernen?</p>
               <div class="learning-mode-buttons">
                   <button class="learning-mode-btn training-btn" onclick="startTrainingMode()">
                       <div class="btn-icon">ğŸ‘¨â€ğŸ«</div>
                       <div class="btn-title">TRAINING</div>
                       <div class="btn-description">Interaktiver Tutor</div>
                   </button>
                   <button class="learning-mode-btn quiz-btn disabled" onclick="startQuizMode()">
                       <div class="btn-icon">ğŸ“</div>
                       <div class="btn-title">QUIZ</div>
                       <div class="btn-description">Bald verfÃ¼gbar</div>
                   </button>
               </div>
           </div>
       </div>
   </div>

   <!-- JavaScript Module Imports -->
   <script src="js/particle-system.js"></script>
   <script src="js/screen-effects.js"></script>
   <script src="js/audio-manager.js"></script>
   <!-- <script src="js/dash-system.js"></script> REMOVED -->
   <script src="js/floating-input-system.js"></script>
   <!-- <script src="js/momentum-system.js"></script> REMOVED -->
   <script src="js/formula-system.js"></script>
   <script src="js/enemy-system.js"></script>
   <script src="js/currency-system.js"></script>
   <script src="js/boss-system.js"></script>
   <script src="js/wave-system.js"></script>
   <script src="js/level-system.js"></script>
   <script src="js/levelup-system.js"></script>
   <script src="js/player-input.js"></script>
   <script src="js/arena-system.js"></script>
   <script src="js/shop-system.js"></script>
   <script src="js/game-engine.js"></script>
   <script src="js/menu-system.js"></script>
   <script src="js/stats-system.js"></script>
   <script src="js/class-selection.js"></script>
   <script src="js/math-topics-system.js"></script>
   <script src="js/difficulty-selection.js"></script>
   <script src="js/tutorial-system.js"></script>
   <script src="js/akademie-system.js"></script>
   <script src="js/main.js"></script>
</body>
</html>
