<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formel-Fury-Shooter</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/shop.css">
    <link rel="stylesheet" href="styles/class-selection.css">
    <link rel="stylesheet" href="styles/math-topics.css">
    <link rel="stylesheet" href="styles/boss.css">
</head>
<body>
    <!-- Class Selection Menu (shown first) -->
    <div id="classSelectionMenu" class="class-selection-container">
        <div class="class-selection-header">
            <h1 class="main-title">üìö MICHIS MATHEMATIK AKADEMIE</h1>
            <p class="subtitle">W√§hle deine Klassenstufe</p>
        </div>
        
        <div class="class-grid">
            <div class="class-card" data-class="7">
                <div class="class-number">7</div>
                <div class="class-title">Klasse 7</div>
                <div class="class-description">Algebraische Grundlagen</div>
                <div class="class-topics">
                    <span class="topic">Termumformungen</span>
                    <span class="topic">Lineare Gleichungen</span>
                    <span class="topic">Prozent- & Zinsrechnung</span>
                </div>
            </div>
            
            <div class="class-card" data-class="8">
                <div class="class-number">8</div>
                <div class="class-title">Klasse 8</div>
                <div class="class-description">Funktionen & Potenzen</div>
                <div class="class-topics">
                    <span class="topic">Lineare Funktionen</span>
                    <span class="topic">Potenzen & Wurzeln</span>
                    <span class="topic">Gleichungssysteme</span>
                </div>
            </div>
            
            <div class="class-card active" data-class="9">
                <div class="class-number">9</div>
                <div class="class-title">Klasse 9</div>
                <div class="class-description">Binomische Formeln & Parabeln</div>
                <div class="class-topics">
                    <span class="topic">Binomische Formeln</span>
                    <span class="topic">Quadratische Funktionen</span>
                    <span class="topic">Parabeln & Scheitelpunkt</span>
                </div>
                <div class="available-badge">VERF√úGBAR</div>
            </div>
            
            <div class="class-card disabled" data-class="10">
                <div class="class-number">10</div>
                <div class="class-title">Klasse 10</div>
                <div class="class-description">Exponential- & Trigonometrie</div>
                <div class="class-topics">
                    <span class="topic">Exponentialfunktionen</span>
                    <span class="topic">Logarithmusfunktionen</span>
                    <span class="topic">Trigonometrische Funktionen</span>
                </div>
                <div class="coming-soon-badge">BALD VERF√úGBAR</div>
            </div>
            
            <div class="class-card disabled" data-class="11">
                <div class="class-number">11</div>
                <div class="class-title">Klasse 11</div>
                <div class="class-description">Analysis & Vektorrechnung</div>
                <div class="class-topics">
                    <span class="topic">Differentialrechnung</span>
                    <span class="topic">Vektoren im Raum</span>
                    <span class="topic">Geraden & Ebenen</span>
                </div>
                <div class="coming-soon-badge">BALD VERF√úGBAR</div>
            </div>
            
            <div class="class-card disabled" data-class="12">
                <div class="class-number">12</div>
                <div class="class-title">Klasse 12</div>
                <div class="class-description">Integralrechnung & Stochastik</div>
                <div class="class-topics">
                    <span class="topic">Integralrechnung</span>
                    <span class="topic">Wahrscheinlichkeitsrechnung</span>
                    <span class="topic">Hypothesentests</span>
                </div>
                <div class="coming-soon-badge">BALD VERF√úGBAR</div>
            </div>
        </div>
        
        <div class="class-selection-footer">
            <button id="startGameBtn" class="start-game-btn" disabled>
                üéÆ SPIEL STARTEN
            </button>
            <p class="footer-text">W√§hle eine verf√ºgbare Klasse zum Spielen</p>
        </div>
    </div>

    <canvas id="gameCanvas" style="display: none;"></canvas>

    <!-- Boss UI Elements -->
    <div id="bossUI" class="boss-interface" style="display: none;">
        <div class="boss-health-container">
            <div class="boss-info">
                <h3 id="bossName" class="boss-name">Boss Name</h3>
                <span id="bossLevel" class="boss-level">Level 1</span>
            </div>
            <div class="boss-health-bar">
                <div id="bossHealthFill" class="boss-health-fill"></div>
                <div id="bossHealthText" class="boss-health-text">100%</div>
            </div>
            <div id="bossProgress" class="boss-progress">0/5 Formeln gel√∂st</div>
            <div id="bossStateIndicator" class="boss-stage-indicator">Spawning...</div>
        </div>
    </div>
    
    <!-- Boss Warning Overlay -->
    <div id="bossWarning" class="boss-warning" style="display: none;">
        ‚ö†Ô∏è BOSS ANGRIFF INCOMING! ‚ö†Ô∏è
    </div>

    <!-- Boss Health Bar -->
    <div id="bossHealthBar" class="boss-health-container" style="display: none;">
        <div class="boss-name" id="bossName">BOSS NAME</div>
        <div class="boss-health-bar">
            <div class="boss-health-fill" id="bossHealthFill"></div>
            <div class="boss-health-text" id="bossHealthText">300/300</div>
        </div>
        <div class="boss-stage-indicator" id="bossStageIndicator">Stage 1/3</div>
    </div>

    <!-- Player Stats Panel -->
    <div id="playerStatsPanel">
        <div class="stats-header">
            <span class="stats-title">üìä SPIELER STATS</span>
        </div>
        <div class="stats-content">
            <div class="stat-row">
                <span class="stat-icon">‚ù§Ô∏è</span>
                <span class="stat-label">HP:</span>
                <span class="stat-value" id="statHP">3/3</span>
            </div>
            <div class="stat-row">
                <span class="stat-icon">üíö</span>
                <span class="stat-label">HP-Reg:</span>
                <span class="stat-value" id="statHPRegen">0.0/s</span>
            </div>
            <div class="stat-row">
                <span class="stat-icon">üçÄ</span>
                <span class="stat-label">Gl√ºck:</span>
                <span class="stat-value" id="statLuck">0%</span>
            </div>
            <div class="stat-row">
                <span class="stat-icon">‚ö°</span>
                <span class="stat-label">Speed:</span>
                <span class="stat-value" id="statSpeed">100%</span>
            </div>
            <div class="stat-row">
                <span class="stat-icon">üéØ</span>
                <span class="stat-label">Combo:</span>
                <span class="stat-value" id="statCombo">0x</span>
            </div>
            <div class="stat-row">
                <span class="stat-icon">üí∞</span>
                <span class="stat-label">Coins:</span>
                <span class="stat-value" id="statCoins">0</span>
            </div>
            <div class="stat-row">
                <span class="stat-icon">üåä</span>
                <span class="stat-label">Wave:</span>
                <span class="stat-value" id="statWave">1</span>
            </div>
            <div class="stat-row">
                <span class="stat-icon">üìà</span>
                <span class="stat-label">Level:</span>
                <span class="stat-value" id="statLevel">1</span>
            </div>
        </div>
    </div>

    <!-- Main Menu -->
    <div id="mainMenu">
        <div id="menuTitle">
            FORMEL-FURY<br>SHOOTER
        </div>
        <div id="menuSubtitle">
            Binomische Formeln treffen auf Alien-Action!
        </div>
        
        <div id="menuButtons">
            <button class="menu-btn" onclick="showMathTopicsMenu()">
                üéÆ SPIEL STARTEN
            </button>
            <button class="menu-btn" onclick="showInstructions()">
                üìö SPIELANLEITUNG
            </button>
            <button class="menu-btn" onclick="showSettings()">
                ‚öôÔ∏è EINSTELLUNGEN
            </button>
            <button class="menu-btn" onclick="showHighScores()">
                üèÜ BESTENLISTE
            </button>
            <button class="menu-btn" onclick="showUpgrades()">
                ‚¨ÜÔ∏è UPGRADES
            </button>
        </div>

        <div id="menuStats">
            <div class="menu-stat">
                <span>üèÜ Rekord-Punktzahl:</span>
                <span id="menuHighScore">0</span>
            </div>
            <div class="menu-stat">
                <span>üéØ Beste Combo:</span>
                <span id="menuBestCombo">0</span>
            </div>
            <div class="menu-stat">
                <span>‚úÖ Richtige Antworten:</span>
                <span id="menuTotalCorrect">0</span>
            </div>
            <div class="menu-stat">
                <span>üé≤ Spiele gespielt:</span>
                <span id="menuGamesPlayed">0</span>
            </div>
        </div>

        <div id="menuInfo">
            <div>Formel-Fury-Shooter v1.0</div>
            <div>Phase 4.2: Modulare Struktur</div>
            <div>¬© 2024 Michi Prompts</div>
        </div>
    </div>

    <!-- Math Topics Selection Menu -->
    <div id="mathTopicsMenu">
        <div id="mathTopicsTitle">
            ‚öîÔ∏è W√ÑHLE DEINE GEGNER ‚öîÔ∏è
        </div>
        <div id="mathTopicsSubtitle">
            Bestimme, welche mathematischen Monster dich herausfordern sollen!
        </div>
        
        <div class="math-topics-container">
            <div class="topic-category">
                <h3 class="category-title">üî• Binomische Formeln - Die Klassiker</h3>
                <div class="topic-items">
                    <div class="topic-item">
                        <input type="checkbox" id="binomial-formulas" class="topic-checkbox" checked>
                        <label for="binomial-formulas" class="topic-label">
                            <span class="topic-name">üèõÔ∏è Binomische Formeln-Bestien</span>
                            <span class="topic-description">Die drei legend√§ren Formeln: (a+b)¬≤, (a-b)¬≤, (a+b)(a-b)</span>
                        </label>
                    </div>
                    <div class="topic-item disabled">
                        <input type="checkbox" id="quadratic-equations" class="topic-checkbox" disabled>
                        <label for="quadratic-equations" class="topic-label">
                            <span class="topic-name">‚öîÔ∏è Quadratische Gleichungs-D√§monen</span>
                            <span class="topic-description">Mitternachtsformel & p-q-Formel Krieger</span>
                            <span class="coming-soon">Bald verf√ºgbar</span>
                        </label>
                    </div>
                </div>
            </div>
            
            <div class="topic-category">
                <h3 class="category-title">üìà Quadratische Funktionen - Die Parabeln</h3>
                <div class="topic-items">
                    <div class="topic-item disabled">
                        <input type="checkbox" id="quadratic-functions" class="topic-checkbox" disabled>
                        <label for="quadratic-functions" class="topic-label">
                            <span class="topic-name">üåô Parabel-Phantome</span>
                            <span class="topic-description">Scheitelpunkt, Nullstellen & Normalform-Monster</span>
                            <span class="coming-soon">Bald verf√ºgbar</span>
                        </label>
                    </div>
                    <div class="topic-item disabled">
                        <input type="checkbox" id="function-transformations" class="topic-checkbox" disabled>
                        <label for="function-transformations" class="topic-label">
                            <span class="topic-name">üîÑ Funktions-Transformations-Titanen</span>
                            <span class="topic-description">Verschiebung, Streckung & Spiegelung der Parabeln</span>
                            <span class="coming-soon">Bald verf√ºgbar</span>
                        </label>
                    </div>
                </div>
            </div>
            
            <div class="topic-category">
                <h3 class="category-title">üßÆ Wurzeln & Potenzen - Die Radikalen</h3>
                <div class="topic-items">
                    <div class="topic-item disabled">
                        <input type="checkbox" id="square-roots" class="topic-checkbox" disabled>
                        <label for="square-roots" class="topic-label">
                            <span class="topic-name">‚àö Wurzel-W√§chter</span>
                            <span class="topic-description">Quadratwurzeln ziehen & Wurzelgesetze anwenden</span>
                            <span class="coming-soon">Bald verf√ºgbar</span>
                        </label>
                    </div>
                    <div class="topic-item disabled">
                        <input type="checkbox" id="power-laws" class="topic-checkbox" disabled>
                        <label for="power-laws" class="topic-label">
                            <span class="topic-name">üí• Potenzgesetze-Piraten</span>
                            <span class="topic-description">Negative & rationale Exponenten meistern</span>
                            <span class="coming-soon">Bald verf√ºgbar</span>
                        </label>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="math-topics-info">
            <div class="selected-count">
                <span id="selectedTopicsCount">1</span> Gegnertyp(en) gew√§hlt
            </div>
            <div class="difficulty-indicator">
                <span class="difficulty-label">Kampfst√§rke:</span>
                <span id="difficultyIndicator" class="difficulty-easy">Anf√§nger</span>
            </div>
        </div>
        
        <div class="math-topics-buttons">
            <button class="menu-btn secondary" onclick="backToMainMenuFromMathTopics()">
                ‚Ü©Ô∏è ZUR√úCK ZUR BASIS
            </button>
            <button class="menu-btn primary" onclick="proceedToGameModeSelection()" id="proceedBtn">
                ‚öîÔ∏è IN DEN KAMPF!
            </button>
        </div>
    </div>

    <!-- Game Mode Selection Menu -->
    <div id="gameModeMenu">
        <div id="gameModeTitle">
            SPIELMODUS W√ÑHLEN
        </div>
        
        <div class="mode-selection">
            <div class="mode-card day-mode" onclick="startGameWithMode('day')">
                <div class="mode-icon">‚òÄÔ∏è</div>
                <div class="mode-title">TAG-MODUS</div>
                <div class="mode-description">
                    Entspanntes Lernen mit Multiple-Choice
                </div>
                <ul class="mode-features">
                    <li>‚úÖ Multiple-Choice Antworten</li>
                    <li>‚ö° Schnellere K√§mpfe</li>
                    <li>üéØ Anf√§ngerfreundlich</li>
                    <li>üåü Perfekt zum √úben</li>
                </ul>
            </div>
            
            <div class="mode-card night-mode" onclick="startGameWithMode('night')">
                <div class="mode-icon">üåô</div>
                <div class="mode-title">NACHT-MODUS</div>
                <div class="mode-description">
                    Herausforderung mit freier Eingabe
                </div>
                <ul class="mode-features">
                    <li>‚úèÔ∏è Freie Antwort-Eingabe</li>
                    <li>üß† Vollst√§ndiges Verst√§ndnis</li>
                    <li>‚öîÔ∏è Maximale Herausforderung</li>
                    <li>üèÜ H√∂here Belohnungen</li>
                </ul>
            </div>
        </div>
        
        <button class="menu-btn" onclick="backToMathTopicsMenu()" style="margin-top: 20px;">
            ‚Ü©Ô∏è ZUR√úCK ZU MATHE-THEMEN
        </button>
    </div>

    <!-- Settings Menu -->
    <div id="settingsMenu">
        <div id="settingsContent">
            <div id="settingsTitle">EINSTELLUNGEN</div>
            
            <div class="setting-item">
                <span class="setting-label">Schwierigkeit:</span>
                <span class="setting-value" id="difficultyValue">Normal</span>
            </div>
            
            <div class="setting-item">
                <span class="setting-label">Sound-Effekte:</span>
                <span class="setting-value" id="soundValue">Ein</span>
            </div>
            
            <div class="setting-item">
                <span class="setting-label">Partikel-Effekte:</span>
                <span class="setting-value" id="particlesValue">Ein</span>
            </div>
            
            <div class="setting-item">
                <span class="setting-label">Debug-Info:</span>
                <span class="setting-value" id="debugValue">Aus</span>
            </div>

            <button class="menu-btn" onclick="resetProgress()" style="margin-top: 20px;">
                üîÑ FORTSCHRITT ZUR√úCKSETZEN
            </button>
            
            <button class="menu-btn" onclick="resetCurrency()" style="margin-top: 10px;">
                üí∞ W√ÑHRUNG ZUR√úCKSETZEN
            </button>
            
            <button class="menu-btn" onclick="closeSettings()" style="margin-top: 10px;">
                ‚Ü©Ô∏è ZUR√úCK
            </button>
        </div>
    </div>
    
    <!-- Upgrades Menu -->
    <div id="upgradesMenu">
        <div id="upgradesContent">
            <button class="upgrades-back-btn" onclick="closeUpgrades()">‚Ü©Ô∏è ZUR√úCK ZUM MEN√ú</button>
            
            <div id="upgradesTitle">UPGRADES</div>
            
            <div class="upgrades-dev-info">
                <div class="dev-stat">
                    <span>Verf√ºgbare Upgrades:</span>
                    <span id="totalUpgrades">0</span>
                </div>
                <div class="dev-stat">
                    <span>Implementierte Upgrades:</span>
                    <span id="implementedUpgrades">0</span>
                </div>
                <div class="dev-stat">
                    <span>Nur visuell:</span>
                    <span id="visualOnlyUpgrades">0</span>
                </div>
            </div>
            
            <div class="upgrades-grid" id="upgradesGrid">
                <!-- Upgrade icons werden hier dynamisch eingef√ºgt -->
            </div>
        </div>
    </div>

    <!-- Upgrade Detail Modal -->
    <div id="upgradeDetailModal">
        <div id="upgradeDetailContent">
            <button class="upgrade-detail-close" onclick="closeUpgradeDetail()">‚úñ</button>
            
            <div class="upgrade-detail-icon" id="upgradeDetailIcon">üìö</div>
            <div id="upgradeDetailTitle">UPGRADE NAME</div>
            
            <div id="upgradeDetailRarities">
                <!-- Rarity sections werden hier dynamisch eingef√ºgt -->
            </div>
        </div>
    </div>

    <!-- Instructions Menu -->
    <div id="instructionsMenu">
        <div id="instructionsContent">
            <div id="instructionsTitle">SPIELANLEITUNG</div>
            
            <div class="instruction-section">
                <h3>üéØ Spielziel</h3>
                <p>Eliminiere Alien-Gegner durch das L√∂sen binomischer Formeln! Erreiche hohe Combos und sammle Punkte, um neue Formel-Typen freizuschalten.</p>
            </div>

            <div class="instruction-section">
                <h3>üéÆ Steuerung</h3>
                <ul>
                    <li><strong>WASD</strong> - Bewegung</li>
                    <li><strong>Maus</strong> - Gegner anvisieren und anklicken</li>
                    <li><strong>SPACE</strong> - Formel-HUD √∂ffnen/schlie√üen</li>
                    <li><strong>ESC</strong> - Pause-Men√º</li>
                    <li><strong>Enter</strong> - Antwort best√§tigen</li>
                </ul>
            </div>

            <div class="instruction-section">
                <h3>üßÆ Formel-Typen</h3>
                <ul>
                    <li><strong>1. Binomische:</strong> (a+b)¬≤ = a¬≤ + 2ab + b¬≤</li>
                    <li><strong>2. Binomische:</strong> (a-b)¬≤ = a¬≤ - 2ab + b¬≤</li>
                    <li><strong>3. Binomische:</strong> (a+b)(a-b) = a¬≤ - b¬≤</li>
                    <li><strong>Faktorisierung:</strong> Umkehrung der Binomischen Formeln</li>
                </ul>
            </div>

            <div class="instruction-section">
                <h3>üëæ Gegner-Typen</h3>
                <div class="enemy-types">
                    <div class="enemy-type">
                        <div class="enemy-type-header">
                            <div class="enemy-icon pz"></div>
                            <strong>Polynom-Zombie (PZ)</strong>
                        </div>
                        <p>Langsam, 80 HP, einfache Formeln<br>Belohnung: 1.0x</p>
                    </div>
                    <div class="enemy-type">
                        <div class="enemy-type-header">
                            <div class="enemy-icon gg"></div>
                            <strong>Gleichungs-Geist (GG)</strong>
                        </div>
                        <p>Schnell, 60 HP, mittlere Formeln<br>Belohnung: 1.3x</p>
                    </div>
                    <div class="enemy-type">
                        <div class="enemy-type-header">
                            <div class="enemy-icon eb"></div>
                            <strong>Elite-Algebra-Bestie (EB)</strong>
                        </div>
                        <p>Langsam, 150 HP, schwere Formeln<br>Belohnung: 2.0x</p>
                    </div>
                    <div class="enemy-type">
                        <div class="enemy-type-header">
                            <div class="enemy-icon standard"></div>
                            <strong>Standard-Gegner</strong>
                        </div>
                        <p>Normal, 100 HP, gemischte Formeln<br>Belohnung: 1.0x</p>
                    </div>
                </div>
            </div>

            <div class="instruction-section">
                <h3>üî• Combo-System</h3>
                <p>Richtige Antworten in Folge erh√∂hen deine Combo! Hohe Combos bringen Bonus-Punkte und schalten schwierigere Gegner frei.</p>
            </div>

            <div class="instruction-section">
                <h3>üìà Progression</h3>
                <p>Mit steigender Punktzahl und Combo-Level schaltest du neue Formel-Typen frei und triffst auf st√§rkere Gegner. Bleib wachsam!</p>
            </div>
            
            <button class="menu-btn" onclick="closeInstructions()" style="margin-top: 20px;">
                ‚Ü©Ô∏è ZUR√úCK ZUM MEN√ú
            </button>
        </div>
    </div>

    <!-- Cheat Mode Indicator -->
    <div id="cheatIndicator">
        üîß CHEAT-MODUS AKTIV üîß
    </div>
   
   <!-- Game UI Overlay -->
   <div id="gameUI">
       <!-- Formula Challenge HUD -->
       <div id="formulaHUD">
           <div id="formulaDisplay">Dr√ºcke SPACE f√ºr eine neue Formel...</div>
           <input type="text" id="formulaInput" placeholder="Gib die L√∂sung ein... (z.B. x¬≤ + 4x + 4)" />
           <div id="formulaButtons">
               <button class="formula-btn" onclick="game.formulaSystem.submitAnswer()">Antworten</button>
               <button class="formula-btn" onclick="game.formulaSystem.skipFormula()">√úberspringen</button>
               <button class="formula-btn" onclick="game.formulaSystem.hideFormulaHUD()">Schlie√üen</button>
           </div>
       </div>
       
       <!-- Feedback Display -->
       <div id="feedbackDisplay"></div>
   </div>

   <!-- Multiple Choice HUD (Day Mode) -->
   <div id="multipleChoiceHUD">
       <div id="mcQuestion">Welche Antwort ist korrekt?</div>
       <div id="mcAnswers">
           <button class="mc-answer" onclick="selectMultipleChoice(0)">A) Option 1</button>
           <button class="mc-answer" onclick="selectMultipleChoice(1)">B) Option 2</button>
           <button class="mc-answer" onclick="selectMultipleChoice(2)">C) Option 3</button>
           <button class="mc-answer" onclick="selectMultipleChoice(3)">D) Option 4</button>
       </div>
       <div id="mcTimer">Zeit: <span id="mcTimeLeft">15</span>s</div>
   </div>

   <!-- Level Up Menu -->
   <div id="levelUpMenu">
       <div id="levelUpContent">
           <div id="levelUpCoins">
               üí∞ <span id="levelUpCoinsValue">0</span> Coins
           </div>
           
           <div id="levelUpTitle">LEVEL UP!</div>
           
           <div id="levelUpUpgrades">
               <div class="upgrade-card" onclick="selectUpgrade(0)">
                   <div class="upgrade-icon">
                       <div class="upgrade-icon-placeholder">?</div>
                   </div>
                   <div class="upgrade-name" id="upgrade0Name">Upgrade 1</div>
                   <div class="upgrade-description" id="upgrade0Desc">Platzhalter Beschreibung</div>
                   <div class="upgrade-category">Common</div>
               </div>
               
               <div class="upgrade-card" onclick="selectUpgrade(1)">
                   <div class="upgrade-icon">
                       <div class="upgrade-icon-placeholder">?</div>
                   </div>
                   <div class="upgrade-name" id="upgrade1Name">Upgrade 2</div>
                   <div class="upgrade-description" id="upgrade1Desc">Platzhalter Beschreibung</div>
                   <div class="upgrade-category">Rare</div>
               </div>
               
               <div class="upgrade-card" onclick="selectUpgrade(2)">
                   <div class="upgrade-icon">
                       <div class="upgrade-icon-placeholder">?</div>
                   </div>
                   <div class="upgrade-name" id="upgrade2Name">Upgrade 3</div>
                   <div class="upgrade-description" id="upgrade2Desc">Platzhalter Beschreibung</div>
                   <div class="upgrade-category">Legendary</div>
               </div>
           </div>
           
           <div id="levelUpPageInfo">1 von 3</div>
       </div>
   </div>

   <!-- Pause Menu -->
   <div id="pauseMenu">
       <div id="pauseContent">
           <div id="pauseTitle">SPIEL PAUSIERT</div>
           
           <button class="pause-btn" onclick="game.resumeGame()">
               ‚ñ∂ Spiel Fortsetzen
           </button>
           
           <button class="pause-btn" onclick="game.restartGame()">
               üîÑ Neustart
           </button>
           
           <button class="pause-btn" onclick="game.showMainMenu()">
               üè† Zur√ºck ins Hauptmen√º
           </button>
           
           <div id="pauseStats">
               <div class="pause-stat">
                   <span>Aktuelle Punktzahl:</span>
                   <span id="pauseScore">0</span>
               </div>
               <div class="pause-stat">
                   <span>Richtige Antworten:</span>
                   <span id="pauseCorrect">0</span>
               </div>
               <div class="pause-stat">
                   <span>Falsche Antworten:</span>
                   <span id="pauseIncorrect">0</span>
               </div>
               <div class="pause-stat">
                   <span>Genauigkeit:</span>
                   <span id="pauseAccuracy">100%</span>
               </div>
               <div class="pause-stat">
                   <span>Aktuelle Gesundheit:</span>
                   <span id="pauseHealth">100/100</span>
               </div>
           </div>
           
           <div class="pause-warning">
               ‚ö† Formeln und Antworten sind im Pause-Men√º verborgen ‚ö†<br>
               Dies verhindert unfaires Nachschlagen w√§hrend des Spiels.
           </div>
       </div>
   </div>
   
   <!-- HUD Elements -->
   <div id="fpsCounter">FPS: 0</div>
   <div id="currencyDisplay">
       üí∞ <span id="coinValue">0</span> Coins
   </div>
   
   <!-- Wave Display -->
   <div id="waveDisplay">
       <div id="waveNumber">Welle 1</div>
       <div id="waveCountdown">N√§chste Welle in: <span id="waveTimer">30</span>s</div>
   </div>
   <div id="scoreDisplay">
       <div>Score: <span id="scoreValue">0</span></div>
       <div>Richtig: <span id="correctCount">0</span></div>
       <div>Falsch: <span id="incorrectCount">0</span></div>
   </div>
   
   <div id="comboDisplay">
       <div>Combo: <span id="comboValue">0</span></div>
       <div>Max: <span id="comboMaxValue">0</span></div>
       <div>‚è± Zeit: <span id="comboTimer">10</span>s</div>
   </div>
   
   <div id="highScoreDisplay">
       <div>üèÜ High Score: <span id="highScoreValue">0</span></div>
   </div>
   
   <div id="gameInfo">
       <div>Formel-Fury-Shooter v1.1</div>
       <div>Phase 4.2: Modulare Struktur</div>
       <div id="gameModeInfo">Modus: NACHT | Controls: WASD + Maus + ESC</div>
   </div>

   <!-- Key Bindings Display -->
   <div id="keyBindingsDisplay">
       <div class="keybindings-header">üéÆ STEUERUNG</div>
       <div class="keybindings-content">
           <div class="keybinding-row">
               <span class="key-combo">WASD</span>
               <span class="key-action">Bewegung</span>
           </div>
           <div class="keybinding-row">
               <span class="key-combo">MAUS</span>
               <span class="key-action">Zielen & Schie√üen</span>
           </div>
           <div class="keybinding-row">
               <span class="key-combo">ESC</span>
               <span class="key-action">Pause</span>
           </div>
           <div class="keybinding-row" id="quantumJumpBinding" style="display: none;">
               <span class="key-combo">SPACE</span>
               <span class="key-action">Quantensprung</span>
           </div>
           <div class="keybinding-row">
               <span class="key-combo">ENTER</span>
               <span class="key-action">Antwort best√§tigen</span>
           </div>
           <div class="keybinding-row">
               <span class="key-combo">TAB</span>
               <span class="key-action">Formel √ºberspringen</span>
           </div>
       </div>
   </div>

   <!-- Shop Menu (Brotato-Style Layout) -->
   <div id="shopMenu">
       <div class="shop-container">
           <!-- Shop Items Bereich (links oben) -->
           <div class="shop-section">
               <div class="shop-header">
                   <h2 class="shop-title">üõí SHOP</h2>
                   <p class="shop-subtitle">W√§hle deine Items weise!</p>
               </div>
               <div class="shop-items-grid">
                   <div class="shop-item" id="shopItem0">
                       <div class="shop-item-icon">‚ùì</div>
                       <div class="shop-item-name">Lade...</div>
                       <div class="shop-item-description">Items werden geladen...</div>
                       <div class="shop-item-rarity">-</div>
                       <div class="shop-item-price">üí∞ 0</div>
                   </div>
                   <div class="shop-item" id="shopItem1">
                       <div class="shop-item-icon">‚ùì</div>
                       <div class="shop-item-name">Lade...</div>
                       <div class="shop-item-description">Items werden geladen...</div>
                       <div class="shop-item-rarity">-</div>
                       <div class="shop-item-price">üí∞ 0</div>
                   </div>
                   <div class="shop-item" id="shopItem2">
                       <div class="shop-item-icon">‚ùì</div>
                       <div class="shop-item-name">Lade...</div>
                       <div class="shop-item-description">Items werden geladen...</div>
                       <div class="shop-item-rarity">-</div>
                       <div class="shop-item-price">üí∞ 0</div>
                   </div>
               </div>
           </div>

           <!-- Player Stats Bereich (rechts oben) -->
           <div class="stats-section">
               <div class="stats-header">
                   <h3 class="stats-title">üìä STATS</h3>
               </div>
               <div class="stats-grid">
                   <div class="stat-row">
                       <span class="stat-icon">‚ù§Ô∏è</span>
                       <span class="stat-label">Gesundheit:</span>
                       <span class="stat-value" id="shopStatHP">100/100</span>
                   </div>
                   <div class="stat-row">
                       <span class="stat-icon">üõ°Ô∏è</span>
                       <span class="stat-label">Schild:</span>
                       <span class="stat-value" id="shopStatShield">0</span>
                   </div>
                   <div class="stat-row">
                       <span class="stat-icon">‚ö°</span>
                       <span class="stat-label">Geschwindigkeit:</span>
                       <span class="stat-value" id="shopStatSpeed">100%</span>
                   </div>
                   <div class="stat-row">
                       <span class="stat-icon">üí∞</span>
                       <span class="stat-label">M√ºnzen:</span>
                       <span class="stat-value" id="shopStatCoins">0</span>
                   </div>
               </div>
           </div>

           <!-- Inventar Bereich (links unten) -->
           <div class="inventory-section">
               <div class="inventory-header">
                   <h3 class="inventory-title">üéí INVENTAR</h3>
                   <p class="inventory-info">Gesammelte Items</p>
               </div>
               <div class="inventory-grid" id="inventoryGrid">
                   <!-- Inventory slots werden dynamisch generiert -->
               </div>
           </div>

           <!-- Continue Bereich (rechts unten) -->
           <div class="continue-section">
               <button class="continue-button" onclick="game.shopSystem?.continueToNextWave()">
                   <div class="continue-wave-info" id="shopWaveInfo">WELLE 1</div>
                   ‚öîÔ∏è WEITER K√ÑMPFEN
               </button>
               <button class="menu-button" onclick="game.shopSystem?.returnToMainMenu()">
                   üè† ZUR√úCK INS HAUPTMEN√ú
               </button>
           </div>
       </div>
       
       <!-- Shop Feedback -->
       <div id="shopFeedback" class="shop-feedback"></div>
   </div>

   <!-- JavaScript Module Imports -->
   <script src="js/particle-system.js"></script>
   <script src="js/screen-effects.js"></script>
   <script src="js/audio-manager.js"></script>
   <!-- <script src="js/dash-system.js"></script> REMOVED -->
   <script src="js/floating-input-system.js"></script>
   <!-- <script src="js/momentum-system.js"></script> REMOVED -->
   <script src="js/formula-system.js"></script>
   <script src="js/enemy-system.js"></script>
   <script src="js/currency-system.js"></script>
   <script src="js/boss-system.js"></script>
   <script src="js/wave-system.js"></script>
   <script src="js/level-system.js"></script>
   <script src="js/levelup-system.js"></script>
   <script src="js/player-input.js"></script>
   <script src="js/arena-system.js"></script>
   <script src="js/shop-system.js"></script>
   <script src="js/game-engine.js"></script>
   <script src="js/menu-system.js"></script>
   <script src="js/stats-system.js"></script>
   <script src="js/class-selection.js"></script>
   <script src="js/math-topics-system.js"></script>
   <script src="js/main.js"></script>
</body>
</html>
