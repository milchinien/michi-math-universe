<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formel-Fury-Shooter</title>
    <link rel="stylesheet" href="styles/main.css">
</head>
<body>
    <canvas id="gameCanvas"></canvas>

    <!-- Player Stats Panel -->
    <div id="playerStatsPanel">
        <div class="stats-header">
            <span class="stats-title">üìä SPIELER STATS</span>
        </div>
        <div class="stats-content">
            <div class="stat-row">
                <span class="stat-icon">‚ù§Ô∏è</span>
                <span class="stat-label">HP:</span>
                <span class="stat-value" id="statHP">3/3</span>
            </div>
            <div class="stat-row">
                <span class="stat-icon">üíö</span>
                <span class="stat-label">HP-Reg:</span>
                <span class="stat-value" id="statHPRegen">0.0/s</span>
            </div>
            <div class="stat-row">
                <span class="stat-icon">üçÄ</span>
                <span class="stat-label">Gl√ºck:</span>
                <span class="stat-value" id="statLuck">0%</span>
            </div>
            <div class="stat-row">
                <span class="stat-icon">‚ö°</span>
                <span class="stat-label">Speed:</span>
                <span class="stat-value" id="statSpeed">100%</span>
            </div>
            <div class="stat-row">
                <span class="stat-icon">üéØ</span>
                <span class="stat-label">Combo:</span>
                <span class="stat-value" id="statCombo">0x</span>
            </div>
            <div class="stat-row">
                <span class="stat-icon">üí∞</span>
                <span class="stat-label">Coins:</span>
                <span class="stat-value" id="statCoins">0</span>
            </div>
            <div class="stat-row">
                <span class="stat-icon">üåä</span>
                <span class="stat-label">Wave:</span>
                <span class="stat-value" id="statWave">1</span>
            </div>
            <div class="stat-row">
                <span class="stat-icon">üìà</span>
                <span class="stat-label">Level:</span>
                <span class="stat-value" id="statLevel">1</span>
            </div>
        </div>
    </div>

    <!-- Main Menu -->
    <div id="mainMenu">
        <div id="menuTitle">
            FORMEL-FURY<br>SHOOTER
        </div>
        <div id="menuSubtitle">
            Binomische Formeln treffen auf Alien-Action!
        </div>
        
        <div id="menuButtons">
            <button class="menu-btn" onclick="showGameModeSelection()">
                üéÆ SPIEL STARTEN
            </button>
            <button class="menu-btn" onclick="showInstructions()">
                üìö SPIELANLEITUNG
            </button>
            <button class="menu-btn" onclick="showSettings()">
                ‚öôÔ∏è EINSTELLUNGEN
            </button>
            <button class="menu-btn" onclick="showHighScores()">
                üèÜ BESTENLISTE
            </button>
        </div>

        <div id="menuStats">
            <div class="menu-stat">
                <span>üèÜ Rekord-Punktzahl:</span>
                <span id="menuHighScore">0</span>
            </div>
            <div class="menu-stat">
                <span>üéØ Beste Combo:</span>
                <span id="menuBestCombo">0</span>
            </div>
            <div class="menu-stat">
                <span>‚úÖ Richtige Antworten:</span>
                <span id="menuTotalCorrect">0</span>
            </div>
            <div class="menu-stat">
                <span>üé≤ Spiele gespielt:</span>
                <span id="menuGamesPlayed">0</span>
            </div>
        </div>

        <div id="menuInfo">
            <div>Formel-Fury-Shooter v1.0</div>
            <div>Phase 4.2: Modulare Struktur</div>
            <div>¬© 2024 Michi Prompts</div>
        </div>
    </div>

    <!-- Game Mode Selection Menu -->
    <div id="gameModeMenu">
        <div id="gameModeTitle">
            SPIELMODUS W√ÑHLEN
        </div>
        
        <div class="mode-selection">
            <div class="mode-card day-mode" onclick="startGameWithMode('day')">
                <div class="mode-icon">‚òÄÔ∏è</div>
                <div class="mode-title">TAG-MODUS</div>
                <div class="mode-description">
                    Entspanntes Lernen mit Multiple-Choice
                </div>
                <ul class="mode-features">
                    <li>‚úÖ Multiple-Choice Antworten</li>
                    <li>‚ö° Schnellere K√§mpfe</li>
                    <li>üéØ Anf√§ngerfreundlich</li>
                    <li>üåü Perfekt zum √úben</li>
                </ul>
            </div>
            
            <div class="mode-card night-mode" onclick="startGameWithMode('night')">
                <div class="mode-icon">üåô</div>
                <div class="mode-title">NACHT-MODUS</div>
                <div class="mode-description">
                    Herausforderung mit freier Eingabe
                </div>
                <ul class="mode-features">
                    <li>‚úèÔ∏è Freie Antwort-Eingabe</li>
                    <li>üß† Vollst√§ndiges Verst√§ndnis</li>
                    <li>‚öîÔ∏è Maximale Herausforderung</li>
                    <li>üèÜ H√∂here Belohnungen</li>
                </ul>
            </div>
        </div>
        
        <button class="menu-btn" onclick="backToMainMenu()" style="margin-top: 20px;">
            ‚Ü©Ô∏è ZUR√úCK ZUM HAUPTMEN√ú
        </button>
    </div>

    <!-- Settings Menu -->
    <div id="settingsMenu">
        <div id="settingsContent">
            <div id="settingsTitle">EINSTELLUNGEN</div>
            
            <div class="setting-item">
                <span class="setting-label">Schwierigkeit:</span>
                <span class="setting-value" id="difficultyValue">Normal</span>
            </div>
            
            <div class="setting-item">
                <span class="setting-label">Sound-Effekte:</span>
                <span class="setting-value" id="soundValue">Ein</span>
            </div>
            
            <div class="setting-item">
                <span class="setting-label">Partikel-Effekte:</span>
                <span class="setting-value" id="particlesValue">Ein</span>
            </div>
            
            <div class="setting-item">
                <span class="setting-label">Debug-Info:</span>
                <span class="setting-value" id="debugValue">Aus</span>
            </div>

            <button class="menu-btn" onclick="resetProgress()" style="margin-top: 20px;">
                üîÑ FORTSCHRITT ZUR√úCKSETZEN
            </button>
            
            <button class="menu-btn" onclick="resetCurrency()" style="margin-top: 10px;">
                üí∞ W√ÑHRUNG ZUR√úCKSETZEN
            </button>
            
            <button class="menu-btn" onclick="closeSettings()" style="margin-top: 10px;">
                ‚Ü©Ô∏è ZUR√úCK
            </button>
        </div>
    </div>

    <!-- Instructions Menu -->
    <div id="instructionsMenu">
        <div id="instructionsContent">
            <div id="instructionsTitle">SPIELANLEITUNG</div>
            
            <div class="instruction-section">
                <h3>üéØ Spielziel</h3>
                <p>Eliminiere Alien-Gegner durch das L√∂sen binomischer Formeln! Erreiche hohe Combos und sammle Punkte, um neue Formel-Typen freizuschalten.</p>
            </div>

            <div class="instruction-section">
                <h3>üéÆ Steuerung</h3>
                <ul>
                    <li><strong>WASD</strong> - Bewegung</li>
                    <li><strong>Maus</strong> - Gegner anvisieren und anklicken</li>
                    <li><strong>SPACE</strong> - Formel-HUD √∂ffnen/schlie√üen</li>
                    <li><strong>ESC</strong> - Pause-Men√º</li>
                    <li><strong>Enter</strong> - Antwort best√§tigen</li>
                </ul>
            </div>

            <div class="instruction-section">
                <h3>üßÆ Formel-Typen</h3>
                <ul>
                    <li><strong>1. Binomische:</strong> (a+b)¬≤ = a¬≤ + 2ab + b¬≤</li>
                    <li><strong>2. Binomische:</strong> (a-b)¬≤ = a¬≤ - 2ab + b¬≤</li>
                    <li><strong>3. Binomische:</strong> (a+b)(a-b) = a¬≤ - b¬≤</li>
                    <li><strong>Faktorisierung:</strong> Umkehrung der Binomischen Formeln</li>
                </ul>
            </div>

            <div class="instruction-section">
                <h3>üëæ Gegner-Typen</h3>
                <div class="enemy-types">
                    <div class="enemy-type">
                        <div class="enemy-type-header">
                            <div class="enemy-icon pz"></div>
                            <strong>Polynom-Zombie (PZ)</strong>
                        </div>
                        <p>Langsam, 80 HP, einfache Formeln<br>Belohnung: 1.0x</p>
                    </div>
                    <div class="enemy-type">
                        <div class="enemy-type-header">
                            <div class="enemy-icon gg"></div>
                            <strong>Gleichungs-Geist (GG)</strong>
                        </div>
                        <p>Schnell, 60 HP, mittlere Formeln<br>Belohnung: 1.3x</p>
                    </div>
                    <div class="enemy-type">
                        <div class="enemy-type-header">
                            <div class="enemy-icon eb"></div>
                            <strong>Elite-Algebra-Bestie (EB)</strong>
                        </div>
                        <p>Langsam, 150 HP, schwere Formeln<br>Belohnung: 2.0x</p>
                    </div>
                    <div class="enemy-type">
                        <div class="enemy-type-header">
                            <div class="enemy-icon standard"></div>
                            <strong>Standard-Gegner</strong>
                        </div>
                        <p>Normal, 100 HP, gemischte Formeln<br>Belohnung: 1.0x</p>
                    </div>
                </div>
            </div>

            <div class="instruction-section">
                <h3>üî• Combo-System</h3>
                <p>Richtige Antworten in Folge erh√∂hen deine Combo! Hohe Combos bringen Bonus-Punkte und schalten schwierigere Gegner frei.</p>
            </div>

            <div class="instruction-section">
                <h3>üìà Progression</h3>
                <p>Mit steigender Punktzahl und Combo-Level schaltest du neue Formel-Typen frei und triffst auf st√§rkere Gegner. Bleib wachsam!</p>
            </div>
            
            <button class="menu-btn" onclick="closeInstructions()" style="margin-top: 20px;">
                ‚Ü©Ô∏è ZUR√úCK ZUM MEN√ú
            </button>
        </div>
    </div>

    <!-- Cheat Mode Indicator -->
    <div id="cheatIndicator">
        üîß CHEAT-MODUS AKTIV üîß
    </div>
   
   <!-- Game UI Overlay -->
   <div id="gameUI">
       <!-- Formula Challenge HUD -->
       <div id="formulaHUD">
           <div id="formulaDisplay">Dr√ºcke SPACE f√ºr eine neue Formel...</div>
           <input type="text" id="formulaInput" placeholder="Gib die L√∂sung ein... (z.B. x¬≤ + 4x + 4)" />
           <div id="formulaButtons">
               <button class="formula-btn" onclick="game.formulaSystem.submitAnswer()">Antworten</button>
               <button class="formula-btn" onclick="game.formulaSystem.skipFormula()">√úberspringen</button>
               <button class="formula-btn" onclick="game.formulaSystem.hideFormulaHUD()">Schlie√üen</button>
           </div>
       </div>
       
       <!-- Feedback Display -->
       <div id="feedbackDisplay"></div>
   </div>

   <!-- Multiple Choice HUD (Day Mode) -->
   <div id="multipleChoiceHUD">
       <div id="mcQuestion">Welche Antwort ist korrekt?</div>
       <div id="mcAnswers">
           <button class="mc-answer" onclick="selectMultipleChoice(0)">A) Option 1</button>
           <button class="mc-answer" onclick="selectMultipleChoice(1)">B) Option 2</button>
           <button class="mc-answer" onclick="selectMultipleChoice(2)">C) Option 3</button>
           <button class="mc-answer" onclick="selectMultipleChoice(3)">D) Option 4</button>
       </div>
       <div id="mcTimer">Zeit: <span id="mcTimeLeft">15</span>s</div>
   </div>

   <!-- Level Up Menu -->
   <div id="levelUpMenu">
       <div id="levelUpContent">
           <div id="levelUpCoins">
               üí∞ <span id="levelUpCoinsValue">0</span> Coins
           </div>
           
           <div id="levelUpTitle">LEVEL UP!</div>
           
           <div id="levelUpUpgrades">
               <div class="upgrade-card" onclick="selectUpgrade(0)">
                   <div class="upgrade-icon">
                       <div class="upgrade-icon-placeholder">?</div>
                   </div>
                   <div class="upgrade-name" id="upgrade0Name">Upgrade 1</div>
                   <div class="upgrade-description" id="upgrade0Desc">Platzhalter Beschreibung</div>
                   <div class="upgrade-category">Common</div>
               </div>
               
               <div class="upgrade-card" onclick="selectUpgrade(1)">
                   <div class="upgrade-icon">
                       <div class="upgrade-icon-placeholder">?</div>
                   </div>
                   <div class="upgrade-name" id="upgrade1Name">Upgrade 2</div>
                   <div class="upgrade-description" id="upgrade1Desc">Platzhalter Beschreibung</div>
                   <div class="upgrade-category">Rare</div>
               </div>
               
               <div class="upgrade-card" onclick="selectUpgrade(2)">
                   <div class="upgrade-icon">
                       <div class="upgrade-icon-placeholder">?</div>
                   </div>
                   <div class="upgrade-name" id="upgrade2Name">Upgrade 3</div>
                   <div class="upgrade-description" id="upgrade2Desc">Platzhalter Beschreibung</div>
                   <div class="upgrade-category">Legendary</div>
               </div>
           </div>
           
           <div id="levelUpPageInfo">1 von 3</div>
       </div>
   </div>

   <!-- Pause Menu -->
   <div id="pauseMenu">
       <div id="pauseContent">
           <div id="pauseTitle">SPIEL PAUSIERT</div>
           
           <button class="pause-btn" onclick="game.resumeGame()">
               ‚ñ∂ Spiel Fortsetzen
           </button>
           
           <button class="pause-btn" onclick="game.restartGame()">
               üîÑ Neustart
           </button>
           
           <button class="pause-btn" onclick="game.togglePauseMenu()">
               ‚öô Zur√ºck zum Spiel
           </button>
           
           <div id="pauseStats">
               <div class="pause-stat">
                   <span>Aktuelle Punktzahl:</span>
                   <span id="pauseScore">0</span>
               </div>
               <div class="pause-stat">
                   <span>Richtige Antworten:</span>
                   <span id="pauseCorrect">0</span>
               </div>
               <div class="pause-stat">
                   <span>Falsche Antworten:</span>
                   <span id="pauseIncorrect">0</span>
               </div>
               <div class="pause-stat">
                   <span>Genauigkeit:</span>
                   <span id="pauseAccuracy">100%</span>
               </div>
               <div class="pause-stat">
                   <span>Aktuelle Gesundheit:</span>
                   <span id="pauseHealth">100/100</span>
               </div>
           </div>
           
           <div class="pause-warning">
               ‚ö† Formeln und Antworten sind im Pause-Men√º verborgen ‚ö†<br>
               Dies verhindert unfaires Nachschlagen w√§hrend des Spiels.
           </div>
       </div>
   </div>
   
   <!-- HUD Elements -->
   <div id="fpsCounter">FPS: 0</div>
   <div id="currencyDisplay">
       üí∞ <span id="coinValue">0</span> Algebra-Coins
   </div>
   <div id="scoreDisplay">
       <div>Score: <span id="scoreValue">0</span></div>
       <div>Richtig: <span id="correctCount">0</span></div>
       <div>Falsch: <span id="incorrectCount">0</span></div>
   </div>
   
   <div id="comboDisplay">
       <div>Combo: <span id="comboValue">0</span></div>
       <div>Max: <span id="comboMaxValue">0</span></div>
       <div>‚è± Zeit: <span id="comboTimer">10</span>s</div>
   </div>
   
   <div id="highScoreDisplay">
       <div>üèÜ High Score: <span id="highScoreValue">0</span></div>
   </div>
   
   <div id="gameInfo">
       <div>Formel-Fury-Shooter v1.1</div>
       <div>Phase 4.2: Modulare Struktur</div>
       <div id="gameModeInfo">Modus: NACHT | Controls: WASD + Maus + ESC</div>
   </div>

   <!-- JavaScript Module Imports -->
   <script src="js/formula-system.js"></script>
   <script src="js/enemy-system.js"></script>
   <script src="js/currency-system.js"></script>
   <script src="js/wave-system.js"></script>
   <script src="js/level-system.js"></script>
   <script src="js/levelup-system.js"></script>
   <script src="js/player-input.js"></script>
   <script src="js/game-engine.js"></script>
   <script src="js/menu-system.js"></script>
   <script src="js/stats-system.js"></script>
   <script src="js/main.js"></script>
</body>
</html>
